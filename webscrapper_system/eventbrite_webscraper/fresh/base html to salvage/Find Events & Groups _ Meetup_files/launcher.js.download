(()=>{var e={879:e=>{self,e.exports=(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{ERROR_LIMIT:()=>n,reportError:()=>i});const n=10;let r=0,o=!1;const i=async(e,t)=>{var i;if(e.handled)return;if(!e.bypassErrorLimit&&r>=n){if(o)return;e.code="ERROR_LIMIT_EXCEEDED",o=!0}r++;const s=(1e7*Math.random()).toFixed(0).toString(),a=function(e,t){var n;const r=new URLSearchParams;return r.append("error_id",t),r.append("use_sandbox",(null===(n=e.useSandbox)||void 0===n?void 0:n.toString())||"false"),r.append("partner_origin",window.location.origin),r.append("rokt_tag_id",e.tagId||""),r.append("severity",e.severity||"WARNING"),r.append("reporter",e.reporter?`frame-${e.reporter}`:"frame"),e.code&&r.append("code",e.code),e.integration&&r.append("integration",e.integration),e.stack&&r.append("stack",e.stack.substring(0,400)),e.additionalInformation=Object.assign({name:e.name,message:e.message},e.additionalInformation),r.append("additional_information",JSON.stringify(e.additionalInformation)),r}(e,s),c=document.createElement("iframe");c.src=`${t||"https://apps.rokt.com"}/wsdk/reporter/index.2.6685.0.html?${a.toString()}`,c.style.display="none";const l=new Promise((e=>{const t=n=>{var r,o,i;"Rokt.Reporter.Close"!==(null===(r=n.data)||void 0===r?void 0:r.action)&&(null===(i=null===(o=n.data)||void 0===o?void 0:o.payload)||void 0===i?void 0:i.errorId)!==s||(e(),window.removeEventListener("message",t))};window.addEventListener("message",t)}));(window.document.body||window.document.head).appendChild(c),await l,null===(i=c.parentElement)||void 0===i||i.removeChild(c)};return t})()}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};(()=>{"use strict";n.d(r,{default:()=>on});var e=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},t=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},o=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},i=function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"},s=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},a=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},c=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,l=3,d=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],u=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function E(n){var r=function(e){return""!==e&&d.reduce((function(t,n){var r=n[0],o=n[1];if(t)return t;var i=o.exec(e);return!!i&&[r,i]}),!1)}(n);if(!r)return null;var o=r[0],a=r[1];if("searchbot"===o)return new s;var E=a[1]&&a[1].split(".").join("_").split("_").slice(0,3);E?E.length<l&&(E=e(e([],E,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(l-E.length),!0)):E=[];var m=E.join("."),_=function(e){for(var t=0,n=u.length;t<n;t++){var r=u[t],o=r[0];if(r[1].exec(e))return o}return null}(n),f=c.exec(n);return f&&f[1]?new i(o,m,_,f[1]):new t(o,m,_)}function m(e){return function(e){return e?E(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new a:"undefined"!=typeof navigator?E(navigator.userAgent):"undefined"!=typeof process&&process.version?new o(process.version.slice(1)):null}(e)}class _{constructor(){this.fulfilled=!1,this.rejected=!1,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})).then((e=>(this.fulfilled=!0,e)),(e=>{throw this.rejected=!0,e}))}isFulfilled(){return this.fulfilled}isPending(){return!this.isFulfilled()&&!this.isRejected()}isRejected(){return this.rejected}static resolve(e){const t=new _;return t.resolve(e),t}}function f(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{return(("y"===e?8:0)^(t=new Uint8Array(1),(window.crypto||window.msCrypto).getRandomValues(t))[0]&15>>("y"===e?2:0)).toString(16);var t}))}const I=(e=0)=>new Promise((t=>setTimeout(t,e))),p={Widget:"widget",DCUI:"dcui",OL16:"offer-layout-16"},N=(e,t)=>`${e}/wsdk/plugins/${t}/index.html`,O=()=>{const e={ROKT_COM_URL:"https://apps.rokt.com",DEMO_ROKT_COM_URL:"https://apps-demo.rokt.com",UPSELLS_TAG_IDS:"6240a06506ec42b38f5475f577e2e5d8,18f21499ab634e598a0029da04bc9ba3,93a61038b3dd4b0c905279e0fb7f9e36,d95d8b6d8662476e8648eb91fbb49fb7,4019a66f0590412ab5b2128fd5eddcf7,669f3e389da34e3a9c5314cd7406ae0d",UPSELLS_ACCOUNT_IDS:"227,253,280,249,250,244,42",UPSELLS_URIS:"checkout,spon,book"};return void 0===e?{ROKT_COM_URL:"",DEMO_ROKT_COM_URL:"",UPSELLS_TAG_IDS:"",UPSELLS_ACCOUNT_IDS:"",UPSELLS_URIS:""}:e},g="ERROR",h="INFO",R="WARNING";class T extends Error{constructor(e){var t,n;super(e.code),this.name=null!==(t=e.name)&&void 0!==t?t:this.name,this.message=e.message||e.code||"",this.code=e.code,this.additionalInformation=e.additionalInformation,this.handled=null!==(n=e.handled)&&void 0!==n&&n,this.severity=e.severity||g,this.integration=e.integration,this.reporter=e.reporter,e.stack&&(this.stack=e.stack)}}const A="ROKT_LOCALSTORAGE_FAILED",y={code:"UNKNOWN_ERROR",severity:g};function w(e,t={}){const n=Object.assign(Object.assign({},y),t);if((r=e)&&"object"==typeof r){const t=e;t.name&&(n.name=t.name),t.message&&(n.message=t.message),t.stack&&(n.stack=t.stack),t.code&&(n.code=t.code),t.reporter&&(n.reporter=t.reporter),t.integration&&(n.integration=t.integration),t.severity&&(n.severity=t.severity),void 0!==t.handled&&(n.handled=t.handled),t.additionalInformation&&(n.additionalInformation=Object.assign(Object.assign({},n.additionalInformation),t.additionalInformation))}var r;return new T(n)}const v="BAD_DYNAMIC_DOMAIN";function L(e,t){const n=e.getElementsByTagName("script");return Array.from(n||[]).find((e=>{if(!e.src)return!1;try{return new URL(e.src).pathname.toLowerCase().includes(t)}catch(e){return!1}}))}const{UPSELLS_ACCOUNT_IDS:S,UPSELLS_TAG_IDS:b,UPSELLS_URIS:C}=O(),P=new Set([...S.split(","),...b.split(",")].filter(Boolean)),D=Object.values(C.split(",").filter(Boolean)),M=(e,t,n,r)=>{const o=e.document.createElement("iframe");return o.style.display="none",o.name=((e,t=!1)=>{const n=new URLSearchParams;return n.append("integration_type",t?"preload_persistent":"preload"),n.append("init_timestamp",String((new Date).getTime())),e&&n.append("plugin_name",e),n.toString()})(n,r),o.src=t,o},x=e=>t=>{const n=M(e,t),r=new Promise((e=>n.onload=e)),o=e.document.body||e.document.head;o.appendChild(n),r.then((()=>{n.onload=null,o.removeChild(n)}))};async function U(e,t,n){const r=x(e),o=t.split("_")[0],i=e.location.href;P.has(o)&&D.some((e=>i.includes(e)))&&await r(N(n,p.OL16))}const F=(e,t)=>{const n=e.document.createElement("iframe");return n.style.display="none",n.setAttribute("sandbox","allow-scripts allow-same-origin"),n.src=t,n};function k(e,t,n){return n&&n.getTime&&n.getTime()<t?n.getTime():e.performance.timeOrigin||e.performance.timing.navigationStart}async function G(e,t,n=5e3){return!!j(e,t)||new Promise((r=>{const o=setInterval((()=>{const n=j(e,t);n&&(clearInterval(o),r(n))}),100);setTimeout((()=>{clearInterval(o),r(!1)}),n)}))}function j(e,t){var n;return((null===(n=null==e?void 0:e.performance)||void 0===n?void 0:n.getEntriesByType("resource"))||[]).some((e=>"script"===e.initiatorType&&e.name.includes(t)))}function W(e){return function(e,t){try{return document.cookie.split(";").filter((e=>e.trim().startsWith("Rokt"))).reduce(((e,t)=>{const[n,r]=t.split("=");return Object.assign(Object.assign({},e),{[n.trim()]:r.trim()})}),{})}catch(e){t(w(e))}return{}}("Rokt",e)}function V(e){return function(e,t){try{return["Rokt","rtid"].flatMap((e=>Object.keys(localStorage).filter((t=>t.startsWith(e))))).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:localStorage.getItem(t)})),{})}catch(e){t(w(e,{code:A,severity:R}))}return{}}(["Rokt","rtid"],e)}function B(e,t){return{version:e.version,captureConversion:async e=>{console.log(e)},hashAttributes:async e=>(console.log(e),{}),selectPlacements:async n=>{const r=await t,o=await r.getSelectionServiceExtension();return n.url=window.location.href,await o.selectPlacements(e,n,Date.now())},terminate:async()=>{},use:async e=>{throw new Error(`Extension ${e} not supported`)}}}const X=Symbol.for("RemoteUi::Retain"),$=Symbol.for("RemoteUi::Release"),H=Symbol.for("RemoteUi::RetainedBy");class Y{constructor(){this._memoryManaged=new Set}add(e){this._memoryManaged.add(e),e[H].add(this),e[X]()}release(){for(const e of this._memoryManaged)e[H].delete(this),e[$]();this._memoryManaged.clear()}}function K(e){return Boolean(e&&e[X]&&e[$])}function Z(e,{deep:t=!0}={}){return Q(e,t,new Map)}function Q(e,t,n){const r=n.get(e);if(null!=r)return r;const o=K(e);if(o&&e[X](),n.set(e,o),t){if(Array.isArray(e)){const r=e.reduce(((e,r)=>Q(r,t,n)||e),o);return n.set(e,r),r}if(q(e)){const r=Object.keys(e).reduce(((r,o)=>Q(e[o],t,n)||r),o);return n.set(e,r),r}}return n.set(e,o),o}function z(e,{deep:t=!0}={}){return J(e,t,new Map)}function J(e,t,n){const r=n.get(e);if(null!=r)return r;const o=K(e);if(o&&e[$](),n.set(e,o),t){if(Array.isArray(e)){const r=e.reduce(((e,r)=>J(r,t,n)||e),o);return n.set(e,r),r}if(q(e)){const r=Object.keys(e).reduce(((r,o)=>J(e[o],t,n)||r),o);return n.set(e,r),r}}return o}function q(e){if(null==e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return null==t||t===Object.prototype}function ee(e,t){const n=e[t];if(void 0!==n&&"function"!=typeof n)throw new TypeError(`${t[0].toUpperCase()+t.slice(1)} must be a function or undefined`)}const te="_@f";function ne(e){const t=new Map,n=new Map,r=new Map;return{encode:function r(o,i=new Map){if(null==o)return[o];const s=i.get(o);if(s)return s;if("object"==typeof o){if(Array.isArray(o)){i.set(o,[void 0]);const e=[],t=[o.map((t=>{const[n,o=[]]=r(t,i);return e.push(...o),n})),e];return i.set(o,t),t}if(q(o)){i.set(o,[void 0]);const e=[],t=[Object.keys(o).reduce(((t,n)=>{const[s,a=[]]=r(o[n],i);return e.push(...a),Object.assign(Object.assign({},t),{[n]:s})}),{}),e];return i.set(o,t),t}}if("function"==typeof o){if(t.has(o)){const e=t.get(o),n=[{[te]:e}];return i.set(o,n),n}const r=e.uuid();t.set(o,r),n.set(r,o);const s=[{[te]:r}];return i.set(o,s),s}const a=[o];return i.set(o,a),a},decode:o,async call(e,t){const r=new Y,i=n.get(e);if(null==i)throw new Error("You attempted to call a function that was already released.");try{const e=K(i)?[r,...i[H]]:[r];return await i(...o(t,e))}finally{r.release()}},release(e){const r=n.get(e);r&&(n.delete(e),t.delete(r))},terminate(){t.clear(),n.clear(),r.clear()}};function o(t,n){if("object"==typeof t){if(null==t)return t;if(Array.isArray(t))return t.map((e=>o(e,n)));if(te in t){const o=t[te];if(r.has(o))return r.get(o);let i=0,s=!1;const a=()=>{i-=1,0===i&&(s=!0,r.delete(o),e.release(o))},c=()=>{i+=1},l=new Set(n),d=(...t)=>{if(s)throw new Error("You attempted to call a function that was already released.");if(!r.has(o))throw new Error("You attempted to call a function that was already revoked.");return e.call(o,t)};!function(e,t){if(!("Zone"in window))return Object.defineProperties(e,t);if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Object.defineProperties called on non-object");if(!Object.isExtensible(e))throw new TypeError("Cannot define properties on a non-extensible object");[...Object.keys(t),...Object.getOwnPropertySymbols(t)].forEach((n=>{const r=t[n];if(!r||"object"!=typeof r)throw new TypeError("Property descriptor must be an object: "+r);if(ee(r,"get"),ee(r,"set"),("get"in r||"set"in r)&&("value"in r||"writable"in r))throw new TypeError("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");Object.defineProperty(e,n,r)}))}(d,{[$]:{value:a,writable:!1},[X]:{value:c,writable:!1},[H]:{value:l,writable:!1}});for(const e of l)e.add(d);return r.set(o,d),d}if(q(t))return Object.keys(t).reduce(((e,r)=>Object.assign(Object.assign({},e),{[r]:o(t[r],n)})),{})}return t}}const re=0,oe=1,ie=2,se=3,ae=5,ce=6;function le(){return`${de()}-${de()}-${de()}-${de()}`}function de(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}const ue="CORE::PORT_EXCHANGE",Ee="CORE::READY",me="CORE::WAITING_FOR_PORT";var _e,fe,Ie;(Ie=_e||(_e={}))[Ie.WAITING=0]="WAITING",Ie[Ie.CONNECTING=1]="CONNECTING",Ie[Ie.TRANSFERRING=2]="TRANSFERRING",Ie[Ie.CONNECTED=3]="CONNECTED",Ie[Ie.READY=4]="READY",Ie[Ie.FAILED_UNDEFINED_SOURCE=5]="FAILED_UNDEFINED_SOURCE",function(e){e.Controller="Controller",e.Extension="Extension",e.Launcher="Launcher",e.Plugin="Plugin"}(fe||(fe={}));const pe={ERROR:"ERROR",INFO:"INFO",WARNING:"WARNING"};class Ne extends Error{constructor(e){super(e.message||e.code),this.code=e.code,this.sourceType=e.sourceType,this.sourceName=e.sourceName,this.severity=e.severity||pe.ERROR,e.stack&&(this.stack=e.stack)}}const Oe={CONTROLLER_ALREADY_EXISTS:"CONTROLLER_ALREADY_EXISTS",STORAGE_ACCESS_ERROR:"STORAGE_ACCESS_ERROR",SET_STORAGE_ITEM_ERROR:"SET_STORAGE_ITEM_ERROR",GET_STORAGE_ITEM_ERROR:"GET_STORAGE_ITEM_ERROR",FAILED_CONTROLLER_REMOVE:"FAILED_CONTROLLER_REMOVE",STOPPED_ON_BOT:"STOPPED_ON_BOT"},ge={PLUGIN_IFRAME_NOT_FOUND:"IFRAME_NOT_FOUND",PLUGIN_PRELOADED_IFRAME_NOT_FOUND:"PLUGIN_PRELOADED_IFRAME_NOT_FOUND",SELECTOR_NOT_FOUND:"SELECTOR_NOT_FOUND",SANDBOX_ATTRIBUTES_ALREADY_SET:"SANDBOX_ATTRIBUTES_ALREADY_SET",PLUGIN_ALREADY_APPENDED:"PLUGIN_ALREADY_APPENDED",SELECTOR_ELEMENT_NOT_FOUND:"SELECTOR_ELEMENT_NOT_FOUND",PLUGIN_PRELOADED_IFRAME_LOAD_TIMEOUT:"PLUGIN_PRELOADED_IFRAME_LOAD_TIMEOUT"},he=()=>{},Re=(e=he,t=he,n=he)=>"function"!=typeof e?e:{next:e,error:t,complete:n};class Te{constructor(){this._subscribers=[]}add(e){this._subscribers.push(e)}unsubscribe(){this._subscribers.forEach((e=>e.unsubscribe()))}}class Ae{constructor(e){this._setupFn=e}subscribe(e,t,n){const r=Re(e,t,n);let o,i=!0;const s={next:e=>{i&&r.next(e)},complete:()=>{i&&(o&&o(),r.complete(),i=!1)},error:e=>{i&&(r.error(e),i=!1)}};o=this._setupFn(s),i||o&&o();const a=new Te;return a.add({unsubscribe:()=>{o&&o(),i=!1}}),a}}class ye extends Ae{constructor(){super((e=>(this._isComplete&&e.complete(),this._observers.push(e),()=>this._observers=this._observers.filter((t=>t!==e))))),this._observers=[],this._isComplete=!1}next(e){for(const t of this._observers)t.next(e)}error(e){for(const t of this._observers)t.error(e)}complete(){this._isComplete=!0;for(const e of this._observers)e.complete()}asObservable(){return new Ae((e=>{const t=this.subscribe(e);return()=>t.unsubscribe()}))}}const we=(e,t)=>new Ae((n=>{const r=e=>n.next(e);return e.addEventListener(t,r),()=>e.removeEventListener(t,r)}));var ve,Le,Se,be=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},Ce=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class Pe{constructor(e,t){ve.set(this,new ye),Le.set(this,void 0),Se.set(this,void 0),be(this,Le,e,"f"),be(this,Se,t,"f")}throw(e,t="",n){throw new Ne({code:e,stack:n,message:t,sourceType:Ce(this,Le,"f"),sourceName:Ce(this,Se,"f")})}onError(){return Ce(this,ve,"f").asObservable()}reportError(e){const t=Object.assign({message:e.message,stack:e.stack},e);Ce(this,ve,"f").next(t)}createCoreError(e,t="",n,r){return new Ne({code:e,stack:n,message:t||e,severity:r,sourceType:Ce(this,Le,"f"),sourceName:Ce(this,Se,"f")})}}function De(e){return Array.isArray(e)}ve=new WeakMap,Le=new WeakMap,Se=new WeakMap;class Me{qualifier(e){return null!=e&&"object"==typeof e&&"$rpc"in e}handler(e){switch(e.$rpc){case"HtmlElement":return function(e){return document.querySelector(e.selector)}(e);case"PromiseProperty":return function(e){return e.getValue()}(e);case"Subscriber":return t=e,(...e)=>{const n=new ye,r=t.getSubscriber(...e).then((e=>e.subscribe({next:e=>n.next(e),error:e=>n.error(e),complete:()=>n.complete()})));return{subscribe:(e,t,o)=>{const i=Re(e,t,o),s=n.subscribe(i);return{unsubscribe:()=>{s.unsubscribe(),r.then((({unsubscribe:e})=>e()))}}}}};case"Listener":return function(e){return async(t,n)=>await e.setEventListener({eventName:t,callback:async(...e)=>await n(...e)})}(e)}var t}}const xe=e=>e.document.querySelector('[data-core-type="controller"]'),Ue=new RegExp(/(Mac OS X)/),Fe=(e,t,n,r)=>{const o=e.document.createElement("iframe");o.style.setProperty("width","0","important"),o.style.setProperty("height","0","important"),o.style.setProperty("border-width","0","important"),o.style.setProperty("overflow","hidden","important"),o.style.setProperty("opacity","0","important"),o.style.setProperty("pointer-events","none","important"),o.style.setProperty("position","absolute","important"),o.style.setProperty("z-index","-1","important"),o.setAttribute("id","rokt-controller-frame"),o.setAttribute("data-core-type","controller"),o.setAttribute("aria-hidden","true"),o.setAttribute("tabindex","-1"),Ue.test((()=>{if("undefined"==typeof window)throw new Error("NO_WINDOW");return window})().navigator.userAgent)||o.sandbox.add("allow-scripts","allow-same-origin");const i=r.isCanary?"canary/":"";o.src=`${t}/${i}controller/index.${r.version}.html`,o.name=n;const s=new Promise((e=>o.onload=()=>e()));return(e.document.body||e.document.head).appendChild(o),s};new RegExp("^\\d{4}-\\d{2}-\\d{2}((T\\d{2}:\\d{2}(:\\d{2})?)(\\.\\d{1,6})?(Z|(\\+|-)\\d{2}:\\d{2})?)?$");function ke(e,t=3,n=100,r=(()=>!0)){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){try{return yield e()}catch(e){if(t<=1||!r(e))throw e}return yield I(1*n),yield ke(e,t-1,n)}))}const Ge=(e,t)=>async()=>{const n=xe(e);if(!n)return;n.remove();const r=t.createCoreError(Oe.FAILED_CONTROLLER_REMOVE,"Could not remove controller from the DOM");return ke((async function(){if(xe(e))throw r}),5,50).catch((()=>{t.reportError(r)}))};class je{constructor(e){this.value=e,this.complete=!1,this.skip=!1}}const We=e=>(...t)=>new Ae((n=>{const r=e.subscribe((e=>function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function*(){try{let r=new je(e);for(const e of t){const t=e(r);if(r=t.then?yield t:t,!0===r.skip||!0===r.complete)break}if(r.skip)return;n.next(r.value),!0===r.complete&&n.complete()}catch(e){n.error(e)}}))),(e=>n.error(e)),(()=>n.complete()));return()=>r.unsubscribe()})),Ve=e=>t=>(!1===e(t.value)&&(t.skip=!0),t),Be=e=>t=>{const n=e(t.value);return new je(n)},Xe=e=>t=>(e(t.value),t);class $e{constructor(e,t,n,r,o,i){this._windowRef=e,this.element=t,this.id=n,this.name=r,this._controllerRPCPlugin=o,this._reporter=i,this._hasPlaced=!1,this.events$=new ye}on(e){return We(this.events$)(Ve((t=>t.eventName===e)),Be((e=>e.data)))}async send(e,t){this._controllerRPCPlugin.sendMessage(e,t)}async putConfig(e){await this._controllerRPCPlugin.putConfig(e)}async appendToElement(e,t="beforeend"){this._hasPlaced&&this._reporter.throw(ge.PLUGIN_ALREADY_APPENDED);const n=new Promise((e=>this.element.onload=()=>e()));e.insertAdjacentElement(t,this.element),this._hasPlaced=!0,await n,await this._controllerRPCPlugin.onAppended()}async appendToSelector(e,t="beforeend"){try{const n=await ke((()=>Promise.resolve(((e,t="")=>{const n=(r=t)?r.replace(/([\#\.])([0-9])/gi,"$1\\3$2 "):r;var r;if(!n)return e.document.body;const o=e.document.querySelector(n);if(!o)throw new Error(`Target element with selector ${n} not found`);return o})(this._windowRef,e))),300,100);await this.appendToElement(n,t)}catch(e){this._reporter.throw(ge.SELECTOR_ELEMENT_NOT_FOUND,e.message,e.stack)}}async markPreloadedPluginAppended(e,t){this._hasPlaced&&this._reporter.throw(ge.PLUGIN_ALREADY_APPENDED);const n=this._windowRef.document.getElementById(this.id);if(n&&!n.onload)await I(0);else{if(!(null==n?void 0:n.onload))return this._handlePreloadIframeErrorWithAppendFallback(e,t,ge.PLUGIN_PRELOADED_IFRAME_NOT_FOUND);try{await this._handleIframeLoad(n),n.onload=null}catch(n){this._handlePreloadIframeErrorWithAppendFallback(e,t,ge.PLUGIN_PRELOADED_IFRAME_LOAD_TIMEOUT)}}this._hasPlaced=!0,await this._controllerRPCPlugin.onAppended()}async close(){var e;null===(e=this.element.parentElement)||void 0===e||e.removeChild(this.element)}async _handlePreloadIframeErrorWithAppendFallback(e,t,n){const r=new Ne({code:n,severity:pe.INFO,sourceType:fe.Plugin,message:""});return this._reporter.reportError(r),this.appendToSelector(e,t)}async _handleIframeLoad(e,t=2e3){return new Promise(((n,r)=>{const o=setTimeout((()=>{r(new Error("Iframe onload event timed out"))}),t),i=e.onload;e.onload=t=>{clearTimeout(o),n(),i&&i.call(e,t)}}))}}const He=e=>e.document.createElement("iframe"),Ye=(e,t,n)=>(e.style.display="none",e.style.width="100%",e.style.colorScheme="auto",e.setAttribute("data-core-type","plugin"),e.setAttribute("scrolling","no"),e.setAttribute("allow","clipboard-write; payment"),e.sandbox.add("allow-scripts","allow-same-origin","allow-popups","allow-forms","allow-top-navigation","allow-popups-to-escape-sandbox"),e.setAttribute("data-e2e-id",n),e.title="Rokt placement",e.name=t,e.id=t,e),Ke=(e,t)=>`${e}/plugins/${t}/index.html`;class Ze extends Map{async clear(){const e=[];for(const t of this.values())e.push(t.close());await Promise.all(e),super.clear()}}const Qe=(e,t)=>{const n=e.document.getElementById(t);n&&n.parentNode&&n.parentNode.removeChild(n)},ze=(e,t,n)=>{const r=new MutationObserver((e=>{for(const o of e)"childList"===o.type&&Je(Array.from(o.removedNodes),t)&&(n(),r.disconnect())}));return r.observe(e.document.body,{attributes:!0,childList:!0,subtree:!0}),()=>r.disconnect()},Je=(e,t)=>{for(const n of e){if(n===t)return!0;if(n.childNodes.length&&Je(Array.from(n.childNodes),t))return!0}return!1};function qe(e,t,n,r,o){return async function(i){const{id:s,name:a,controllerRPCPlugin:c,register:l,e2eId:d,shouldUsePreloadPluginIframe:u}=i;let E=null;if(u){const t=e.document.getElementById(a);t&&(E=Ye(t,s,d))}E||(E=Ye(He(e),s,d),E.src=Ke(t,a));const m=new $e(e,E,s,a,c,r);l&&n.set(s,m);const _=o(m,E,r);return Z(c),ze(e,E,(async()=>{await c.close(),z(c)})),_}}function et(e,t,n){let r=!1;return{async appendTo(t,n){await e.appendToSelector(t,n)},async markPreloadedPluginAppended(t,n){await e.markPreloadedPluginAppended(t,n)},async clearStyles(){t.removeAttribute("style")},async sendMessage(t,n){e.events$.next({eventName:t,data:n})},async setSandbox(e){r?n.throw(ge.SANDBOX_ATTRIBUTES_ALREADY_SET):t.sandbox.add(...e),r=!0},async setTitle(e){t.title=e},async setStyles(e){for(const[n,r]of Object.entries(e))t.style[n]=r},async close(){await e.close()}}}const tt=new RegExp("^[rR]okt");function nt(e){return!!e.match(tt)}function rt(e,t,n){let r;try{r=e[t]}catch(e){const r=n.createCoreError(Oe.STORAGE_ACCESS_ERROR,`Could not access partner storage: ${t}`,e.stack,pe.WARNING);n.reportError(r)}return{async getItem(e){if(r&&nt(e))try{return r.getItem(e)||""}catch(r){const o=n.createCoreError(Oe.GET_STORAGE_ITEM_ERROR,`Could not get item with a key '${e}' from partner storage: ${t}`,r.stack,pe.WARNING);n.reportError(o)}return""},async setItem(e,o){if(r&&nt(e))try{r.setItem(e,o)}catch(r){const o=n.createCoreError(Oe.SET_STORAGE_ITEM_ERROR,`Could not set item with a key '${e}' in partner storage: ${t}`,r.stack,pe.WARNING);n.reportError(o)}},async removeItem(e){r&&nt(e)&&r.removeItem(e)},async clear(){r&&r.clear()}}}const ot=e=>({getPerformanceData:async()=>{var t,n,r;const[o]=null!==(n=null===(t=null==e?void 0:e.performance)||void 0===t?void 0:t.getEntriesByType("navigation"))&&void 0!==n?n:[];return{timeOrigin:null===(r=null==e?void 0:e.performance)||void 0===r?void 0:r.timeOrigin,domContentLoadedEventStart:null==o?void 0:o.domContentLoadedEventStart}}}),it=2;function st(e=window.document){return{get:async t=>async function(e,t){const n=e.match(function(e){return new RegExp("(^| )"+e+"=([^;]+)")}(t));return nt(t)&&n&&n[it]?n[it]:void 0}(e.cookie,t).then((e=>e)).catch((()=>{})),async set(t){e.cookie=t}}}function at(e){return{getHref:async()=>e.href,getHostname:async()=>e.hostname}}function ct(e){return function(e){return!isNaN(parseFloat(e))&&isFinite(e)}(e)?parseInt(e,10):0}const lt=(...e)=>({points:e}),dt=["overflow","overflowX","overflowY"],ut=e=>{let t=null;return async n=>{const r=e.document.querySelector(n);if(r&&!t){t={},(()=>{for(const n of dt)t&&(t[n]=e.document.documentElement.style[n]);e.document.documentElement.style.overflow="hidden"})();const n=new e.MutationObserver((()=>{e.document.contains(r)||((()=>{for(const n of dt)t&&(e.document.documentElement.style[n]=t[n])})(),n.disconnect())}));n.observe(e.document,{childList:!0,subtree:!0})}}};class Et{constructor(e,t,n,r){this.connection=e,this._rpcController=t,this._pluginRegistry=n,this._isTerminatedResolvable=r}async createPlugin({name:e,e2eId:t,config:n,shouldUsePreloadPluginIframe:r}){const o=await this._rpcController.createPlugin(e,n,null!=t?t:"",r);return this._pluginRegistry.get(o)}registerPreloadedPluginIframe(e){this._rpcController.registerPreloadedPluginIframe(e)}getPlugins(){return this._pluginRegistry}async getLauncherExtension(...e){return this._rpcController.getLauncherExtension(...e)}async useExtension(e){return this._rpcController.useExtension(e)}onTerminate(){return this._isTerminatedResolvable.promise}async getSelectionServiceExtension(){return this._rpcController.getSelectionServiceExtension()}}const mt=["https://gtm-msr.appspot.com"];async function _t({integrationUrl:e,windowRef:t=window,controllerFrameName:n,deploymentVersion:r,reportError:o}){const i=new Pe(fe.Launcher),s=new _;if(xe(t)&&i.throw(Oe.CONTROLLER_ALREADY_EXISTS),mt.includes(t.location.origin))throw i.createCoreError(Oe.STOPPED_ON_BOT,"WSDK initialized on known bot websites",void 0,pe.INFO);const{origin:a}=new t.URL(e),c=function(e,t,n){const{port1:r,port2:o}=new e.MessageChannel;e.addEventListener("message",(function n(s){l(s,me)&&(a.status=_e.TRANSFERRING,e.removeEventListener("message",n),s.source?(i.resolve(s.source),s.source.postMessage(ue,{targetOrigin:t,transfer:[o]}),r.start(),a.status=_e.CONNECTED):a.status=_e.FAILED_UNDEFINED_SOURCE)})),e.addEventListener("message",(function t(n){l(n,Ee)&&(e.removeEventListener("message",t),s.resolve(),a.status=_e.READY)}));const i=new _,s=new _,a=Object.assign(Object.assign({},(c=r,{postMessage:(...e)=>c.postMessage(...e),addEventListener:(...e)=>c.addEventListener(...e),removeEventListener:(...e)=>c.removeEventListener(...e),terminate(){c.close()}})),{status:_e.WAITING,onReady:()=>s.promise,ready:async()=>{(await i.promise).postMessage(Ee,{targetOrigin:t})}});var c;return a;function l(e,r){return!(!e||"string"!=typeof e.data||e.data!==r||e.origin!==t&&(n(e.origin),1))}}(t,a,o);try{const o=new Ze,a=Fe(t,e,null!=n?n:"uninitialized",r);await a;const l=function(e,{uuid:t=le,createEncoder:n=ne,callable:r}={}){let o=!1,i=e;const s=new Map,a=new Map,c=function(e,t){let n;if(null==t){if("function"!=typeof Proxy)throw new Error("You must pass an array of callable methods in environments without Proxies.");const t=new Map;n=new Proxy({},{get(n,r){if(t.has(r))return t.get(r);const o=e(r);return t.set(r,o),o}})}else{n={};for(const r of t)Object.defineProperty(n,r,{value:e(r),writable:!1,configurable:!0,enumerable:!0})}return n}(E,r),l=n({uuid:t,release(e){d(se,[e])},call(e,n,r){const o=t(),i=m(o,r),[s,a]=l.encode(n);return d(ae,[o,e,s],a),i}});return i.addEventListener("message",u),{call:c,replace(e){const t=i;i=e,t.removeEventListener("message",u),e.addEventListener("message",u)},expose(e){for(const t of Object.keys(e)){const n=e[t];"function"==typeof n?s.set(t,n):s.delete(t)}},callable(...e){if(null!=r)for(const t of e)Object.defineProperty(c,t,{value:E(t),writable:!1,configurable:!0,enumerable:!0})},terminate(){d(ie,void 0),_(),i.terminate&&i.terminate()}};function d(e,t,n){o||i.postMessage(t?[e,t]:[e],n)}async function u(e){const{data:t}=e;var n;if(n=t,Array.isArray(n)&&"number"==typeof n[0]&&(null==n[1]||Array.isArray(n[1])))switch(t[0]){case ie:_();break;case re:{const e=new Y,[n,r,o]=t[1],i=s.get(r);try{if(null==i)throw new Error(`No '${r}' method is exposed on this endpoint`);const[t,s]=l.encode(await i(...l.decode(o,[e])));d(oe,[n,void 0,t],s)}catch(e){const{name:t,message:r,stack:o}=e;throw d(oe,[n,{name:t,message:r,stack:o}]),e}finally{e.release()}break}case oe:{const[e]=t[1];a.get(e)(...t[1]),a.delete(e);break}case se:{const[e]=t[1];l.release(e);break}case ce:{const[e]=t[1];a.get(e)(...t[1]),a.delete(e);break}case ae:{const[e,n,r]=t[1];try{const t=await l.call(n,r),[o,i]=l.encode(t);d(ce,[e,void 0,o],i)}catch(t){const{name:n,message:r,stack:o}=t;throw d(ce,[e,{name:n,message:r,stack:o}]),t}break}}}function E(e){return(...n)=>{if(o)return Promise.reject(new Error("You attempted to call a function on a terminated web worker."));if("string"!=typeof e&&"number"!=typeof e)return Promise.reject(new Error(`Can’t call a symbol method on a remote endpoint: ${e.toString()}`));const r=t(),i=m(r),[s,a]=l.encode(n);return d(re,[r,e,s],a),i}}function m(e,t){return new Promise(((n,r)=>{a.set(e,((e,o,i)=>{if(null==o)n(i&&l.decode(i,t));else{const e=new Error;Object.assign(e,o),r(e)}}))}))}function _(){var e;o=!0,s.clear(),a.clear(),null===(e=l.terminate)||void 0===e||e.call(l),i.removeEventListener("message",u)}}(c),d=function({qualifier:e,handler:t}){return function n(r){return o=r,Object(o)!==o?r:De(r)?r.map((e=>n(e))):new Proxy(r,{get(r,o){const i=r[o];return e(i)?t(i):function(e){return null!==e&&"object"==typeof e&&!De(e)}(i)?n(i):function(e){return"function"==typeof e}(i)?(...e)=>{const t=i(...e);return function(e){return e instanceof Promise}(t)?t.then((e=>n(e))):n(t)}:i}});var o}}(new Me)(l.call);c.ready();const u=Array();u.push(i.onError().subscribe((e=>{d.reportError(e)})));const E=function(e,t,n,r,o,i,s,a){return{createPlugin:qe(e,t,n,r,et),removePreloadedPluginIframe:t=>Qe(e,t),getWindow:()=>function(e,t){return new Promise((n=>{n({localStorage:rt(e,"localStorage",t),sessionStorage:rt(e,"sessionStorage",t),location:at(e.location),cookies:st(),performance:ot(e)})}))}(e,r),getHighestZIndex:()=>Promise.resolve(function(){const e=document.body.querySelectorAll("*");return Array.from(e).filter((e=>e&&e.nodeType===Node.ELEMENT_NODE)).reduce(((e,t)=>{const n=ct(document.defaultView.getComputedStyle(t).getPropertyValue("z-index")),r=ct(t.style&&t.style.zIndex);return Math.max(e,n,r)}),0)}()),getElementBoundingRect:t=>async function(e,t){var n;return null===(n=t.document.getElementById(e))||void 0===n?void 0:n.getBoundingClientRect()}(t,e),getElementCoverage:(t,n)=>async function(e,t,n){const r=n.document.getElementById(e);if(!r)return lt();const{points:o}=t,i=o.filter((({x:e,y:t})=>n.document.elementFromPoint(e,t)!==r));return lt(...i)}(t,n,e),setFullscreen:ut(e),terminate:async()=>{a.forEach((e=>{e.unsubscribe()})),s.resolve(),await n.clear(),await I(0),await i(),setTimeout((()=>o.terminate()),0)}}}(t,e,o,i,l,Ge(t,i),s,u);return l.expose(E),new Et(c,d,o,s)}catch(e){throw e.message=`${e.message}; Connection status ${c.status}`,e}}const ft="pageInit",It="frameworkStart",pt="frameworkEnd",Nt="partnerLauncherInterface",Ot="Rokt-Events";var gt,ht;!function(e){e[e.Launcher=0]="Launcher",e[e.Controller=1]="Controller",e[e.Plugin=2]="Plugin",e[e.Result=3]="Result"}(gt||(gt={})),function(e){e.EventResult="EventResult",e.Launcher_DataQuery="Launcher_DataQuery",e.Launcher_ControllerNotification_Ready="Launcher_ControllerNotification_Ready",e.Launcher_To_Controller_RemoteCall="Launcher_To_Controller_Remote_Call"}(ht||(ht={}));const Rt=new ye,Tt=(new ye,new ye),At=new ye,yt=new class extends ye{constructor(e){super(),this._lastValue=e}subscribe(e,t,n){const r=Re(e,t,n);return r.next(this._lastValue),super.subscribe(r)}next(e){return this._lastValue=e,super.next(e)}getValue(){return this._lastValue}}(null),wt=(e,t)=>{const n=We(we(window,"message"))(Ve((e=>e.data.identifier===Ot&&e.data.topic===ht.Launcher_ControllerNotification_Ready)),Xe((r=>{const o=new URL(e).origin;if(r.origin!==o)return void t(r.origin);const i=r.ports.at(0);i&&((e=>{We(we(e,"message"))(Ve((e=>e.data.identifier===Ot)),Xe((e=>{switch(e.data.handler){case gt.Launcher:return void At.next(e.data);case gt.Controller:return void Rt.next(e.data);case gt.Result:return void Tt.next(e.data)}})),Xe((t=>{const n=We(Tt)(Ve((e=>e.id===t.data.id)),Xe((t=>{e.postMessage(t),n.unsubscribe()}))).subscribe()}))).subscribe()})(i),i.start(),yt.next(i),n.unsubscribe())}))).subscribe()},vt=(e,t)=>({start:e+window.performance.timeOrigin,end:e+t+window.performance.timeOrigin}),Lt={getPerformanceResources:e=>{const t=window.performance.getEntriesByType("resource"),n={},r=t.find((e=>e.name.includes("integrations/launcher")||e.name.includes("integrations/snippet")));r&&(n.launcher=vt(r.startTime,r.duration));const o=document.getElementById("rokt-controller-frame");if(o){const e=o.src,r=t.find((t=>t.name.includes(e)&&"iframe"===t.initiatorType));r&&(n.controller=vt(r.startTime,r.duration))}const i=document.getElementById(e);if(i){const e=i.src,r=t.find((t=>t.name.includes(e)&&"iframe"===t.initiatorType));r&&(n.plugin=vt(r.startTime,r.duration))}return n},getLauncherInitData:()=>{var e,t,n;const r=null===(e=window.performance.getEntriesByType("resource").find((e=>e.name.includes("integrations/launcher")||e.name.includes("integrations/snippet"))))||void 0===e?void 0:e.duration;return{downloadDuration:r,partnerPageHref:null===(n=null===(t=null===window||void 0===window?void 0:window.location)||void 0===t?void 0:t.href)||void 0===n?void 0:n.split("?")[0]}}},St=["performance","timeOrigin","getEntriesByType"],bt=async e=>{if(e.topic===ht.Launcher_DataQuery)return await(async(e,t=St)=>{var n,r,o,i,s;if(!(null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.length)&&!e.functionName)return;if(null===(r=null==e?void 0:e.target)||void 0===r?void 0:r.some((e=>!t.includes(e))))throw new Error("Invalid target");if(e.functionName){const t=Lt[e.functionName];if(t)return t(...null!==(o=e.arguments)&&void 0!==o?o:[])}const a=null!==(i=null==e?void 0:e.target)&&void 0!==i?i:[];let c,l,d=window;for(let e=0;e<a.length;e++){if(!d)return;d=d[a[e]],e===a.length-2&&(c=d)}if("function"!=typeof d)l=d;else{const t=null!==(s=e.arguments)&&void 0!==s?s:[],n=d.bind(c)(...t);l=await Promise.resolve(n)}if(void 0!==e.index&&(l=l[e.index]),e.children){const t={};return e.children.forEach((e=>{l&&l[e]&&(t[e]=l[e])})),t}return l})(e.body)};let Ct=!1,Pt=!1;const Dt=[],Mt=(e={},t,n)=>new Proxy(e,{get:function(e,r){if("then"!==r)return r in e?e[r]:(...e)=>{const o={id:f(),identifier:Ot,handler:gt.Controller,topic:ht.Launcher_To_Controller_RemoteCall,body:{args:e,function:r}};t&&(o.complexObjectId=t),void 0!==n&&(o.complexObjectIndex=n);const i=We(Tt)(Ve((e=>e.id===o.id)),Be((e=>({resultComplexObjectId:e.complexObjectId,result:e.result,isComplexArray:e.isComplexArray})))),s=((e,t)=>{let n;return new Promise(((t,r)=>{n=e.subscribe(t,r,(()=>{r(new Error("CompletedBeforeEmit"))}))})).then((e=>(n.unsubscribe(),e))).catch((e=>{throw n.unsubscribe(),e}))})(i);Rt.next(o);const a=new Proxy({},{get:(e,t)=>(...e)=>i[t]?We(i)(Be((({result:e,resultComplexObjectId:t,isComplexArray:n})=>t?xt(e,t,n):e)))[t](...e):s[t]?s.then((({result:e,resultComplexObjectId:t,isComplexArray:n})=>t?xt(e,t,n):e))[t](...e):{}});return a}}}),xt=(e={},t,n)=>n?Array.isArray(e)?e.map(((e,n)=>Mt(e,t,n))):e:Mt(e,t),Ut=xt();let Ft=!1,kt=!1;const Gt={BROWSER_NOT_SUPPORTED:"BROWSER_NOT_SUPPORTED",CORE_LAUNCHER_TIMEOUT:"CORE_LAUNCHER_TIMEOUT",CORE_LAUNCHER_INITIALIZATION:"CORE_LAUNCHER_INITIALIZATION",CONTROLLER_INITIALIZATION:"CONTROLLER_INITIALIZATION",HASHING_FAILED:"HASHING_FAILED",INITIALIZATION_ERROR:"INITIALIZATION_ERROR",INTEGRATION_LAUNCHER_INITIALIZATION:"INTEGRATION_LAUNCHER_INITIALIZATION",LATE_CONTROLLER_INITIALIZATION:"LATE_CONTROLLER_INITIALIZATION",NO_ACCOUNT_ID:"NO_ACCOUNT_ID",NO_OPTIONS:"NO_OPTIONS",SECOND_INSTANCE:"SECOND_INSTANCE",SELECTION_MADE_FOR_CONVERSION:"SELECTION_MADE_FOR_CONVERSION",SIMULTANEOUS_SELECTION:"SIMULTANEOUS_SELECTION",NO_ATTRIBUTES:"NO_ATTRIBUTES",BAD_DYNAMIC_DOMAIN:"BAD_DYNAMIC_DOMAIN",FAILED_TO_APPEND_PRELOAD_IFRAME_TO_BODY:"FAILED_TO_APPEND_PRELOAD_IFRAME_TO_BODY",INVALID_MESSAGE_ORIGIN:"INVALID_MESSAGE_ORIGIN",INVALID_RPC_MESSAGE_ORIGIN:"INVALID_RPC_MESSAGE_ORIGIN",EXTENSION_VX_ATTRIBUTE_TIMEOUT:"EXTENSION_VX_ATTRIBUTE_TIMEOUT",FAILED_TO_DETECT_LOCAL_LAUNCHER:"FAILED_TO_DETECT_LOCAL_LAUNCHER",PAGE_START_NOT_FOUND:"PAGE_START_NOT_FOUND"},jt={ERROR:"ERROR",INFO:"INFO",WARNING:"WARNING"};class Wt extends Error{constructor(e){var t,n;super(e.code),this.name=null!==(t=e.name)&&void 0!==t?t:this.name,this.message=e.message||e.code||"",this.code=e.code,this.additionalInformation=e.additionalInformation,this.handled=null!==(n=e.handled)&&void 0!==n&&n,this.severity=e.severity||jt.ERROR,this.integration=e.integration,this.reporter=e.reporter,e.stack&&(this.stack=e.stack)}}const Vt={EVENT_RESPONSE:"EVENT_RESPONSE",TOKEN_NOT_FOUND:"TOKEN_NOT_FOUND",UNKNOWN_ERROR:"UNKNOWN_ERROR",UNHANDLED_EXCEPTION:"UNHANDLED_EXCEPTION",LOAD_EVENT_DATA_FAILED:"LOAD_EVENT_DATA_FAILED",SAVE_EVENT_DATA_FAILED:"SAVE_EVENT_DATA_FAILED",UPDATE_EVENT_DATA_FAILED:"UPDATE_EVENT_DATA_FAILED",GET_EVENT_DATA_FAILED:"GET_EVENT_DATA_FAILED",ERROR_LIMIT_EXCEEDED:"ERROR_LIMIT_EXCEEDED",WARNING_LIMIT_EXCEEDED:"WARNING_LIMIT_EXCEEDED",EXPERIENCES_CALL_FAILED:"EXPERIENCES_CALL_FAILED",SESSION_LIMIT_EXCEEDED:"SESSION_LIMIT_EXCEEDED",LAUNCHER_VERSION:"LAUNCHER_VERSION",LAYOUT_RECEIVED:"LAYOUT_RECEIVED",TERMINATE_FAILED:"TERMINATE_FAILED",CONTROLLER_CONNECTION_TIMEOUT:"CONTROLLER_CONNECTION_TIMEOUT",LATE_CONTROLLER_CONNECTION:"LATE_CONTROLLER_CONNECTION",PLUGIN_INITIALIZATION_TIMEOUT:"PLUGIN_INITIALIZATION_TIMEOUT",INVALID_METRICS:"INVALID_METRICS",REQUEST_FAILED:"REQUEST_FAILED",METRICS_REQUEST_FAILED:"METRICS_REQUEST_FAILED",TIMINGS_REQUEST_FAILED:"TIMINGS_REQUEST_FAILED",TIMINGS_EVENTS_REQUEST_FAILED:"TIMINGS_EVENTS_REQUEST_FAILED",SELECTION_MADE_FOR_CONVERSION:"SELECTION_MADE_FOR_CONVERSION",HASHING_FAILED:"HASHING_FAILED",PAGE_IDENTIFIER_DOES_NOT_EXIST:"PAGE_IDENTIFIER_DOES_NOT_EXIST",SELECTOR_ELEMENT_NOT_FOUND:"SELECTOR_ELEMENT_NOT_FOUND",ROKT_FIRST_TOUCH_NOT_SET:"ROKT_FIRST_TOUCH_NOT_SET",ROKT_COOKIES_FAILED:"ROKT_COOKIES_FAILED",ROKT_LOCALSTORAGE_FAILED:"ROKT_LOCALSTORAGE_FAILED",ROKT_LOCATION_BEGIN_FAILED:"ROKT_LOCATION_BEGIN_FAILED",ROKT_LOCATION_CHANGE_FAILED:"ROKT_LOCATION_CHANGE_FAILED",PLUGIN_ALREADY_APPENDED:"PLUGIN_ALREADY_APPENDED",EXTENSION_INITIALIZATION:"EXTENSION_INITIALIZATION",EXTENSION_SELECTION_ERROR:"EXTENSION_SELECTION_ERROR",PLUGIN_MISSIZED:"PLUGIN_MISSIZED",PLUGIN_COVERED:"PLUGIN_COVERED",PLUGIN_COVERED_FULL:"PLUGIN_COVERED_FULL",GET_PARTNER_LAUNCHER_EXTENSION:"GET_PARTNER_LAUNCHER_EXTENSION",DOMAIN_TRANSFER:"DOMAIN_TRANSFER",DUPLICATE_TIMING_METRICS:"DUPLICATE_TIMING_METRICS",PLUGIN_PRELOADED_IFRAME_NOT_FOUND:"PLUGIN_PRELOADED_IFRAME_NOT_FOUND",EXTERNAL_EVENT_ERROR:"EXTERNAL_EVENT_ERROR",DOMAIN_PATTERN_MAPPING_NOT_FOUND:"DOMAIN_PATTERN_MAPPING_NOT_FOUND",V2_METRICS_REQUEST_FAILED:"V2_METRICS_REQUEST_FAILED",V1_EVENT_RESPONSE_REQUEST_FAILED:"V1_EVENT_RESPONSE_REQUEST_FAILED",V1_METRICS_REQUEST_FAILED:"V1_METRICS_REQUEST_FAILED",V1_EXPERIENCES_REQUEST_FAILED:"V1_EXPERIENCES_REQUEST_FAILED",EXTENSION_INITIALIZATION_ERROR:"EXTENSION_INITIALIZATION_ERROR",EXTENSION_LOAD_ERROR:"EXTENSION_LOAD_ERROR",DOMAIN_EXTENSION_MAPPING_ERROR:"DOMAIN_EXTENSION_MAPPING_ERROR"},Bt={code:Vt.UNKNOWN_ERROR,severity:jt.ERROR};function Xt(e,t={}){const n=Object.assign(Object.assign({},Bt),t);if((r=e)&&"object"==typeof r){const t=e;t.name&&(n.name=t.name),t.message&&(n.message=t.message),t.stack&&(n.stack=t.stack),t.code&&(n.code=t.code),t.reporter&&(n.reporter=t.reporter),t.integration&&(n.integration=t.integration),t.severity&&(n.severity=t.severity),void 0!==t.handled&&(n.handled=t.handled),t.additionalInformation&&(n.additionalInformation=Object.assign(Object.assign({},n.additionalInformation),t.additionalInformation))}var r;return new Wt(n)}function $t(){let e;return void 0==={CANARY:"false",VERSION:"2.6685.0",SOURCEMAP_ROKTINTERNAL_COM_URL:"https://sourcemaps-wsdk.roktinternal.com",PRELOAD_PLUGIN_NAME:"dcui",SCRIPT_PATH:"integrations/launcher.js",DOMAIN_EXTENSION_MAPPING:'{"dsw.com":["payment-trigger"],"direct.asda.com":["payment-trigger"],"footlocker.co.uk":["payment-trigger"],"cinemark.com":["payment-trigger"],"kidsfootlocker.com":["payment-trigger"],"champssports.com":["payment-trigger"],"famousfootwear.com":["payment-trigger"],"footlocker.com":["payment-trigger"],"cdkeys.com":["payment-trigger"],"newegg.com":["payment-trigger"],"citybeach.com/au":["payment-trigger"],"footlocker.com.au":["payment-trigger"],"generalpants.com":["payment-trigger"],"hoyts.com.au":["payment-trigger"]}',LOCAL_LAUNCHER_DOMAINS:"gumtree.com.au,oldnavy.gap.com,officesupply.com,trueclassictees.com,thelasthunt.com"}?(e={VERSION:"",DEBUG:"false",PRELOAD_PLUGIN_NAME:"",CANARY:"false",SCRIPT_PATH:"",DOMAIN_EXTENSION_MAPPING:"",LOCAL_LAUNCHER_DOMAINS:"",INIT_LOG_SAMPLING_PERCENTAGE:"0"},e):{CANARY:"false",VERSION:"2.6685.0",SOURCEMAP_ROKTINTERNAL_COM_URL:"https://sourcemaps-wsdk.roktinternal.com",PRELOAD_PLUGIN_NAME:"dcui",SCRIPT_PATH:"integrations/launcher.js",DOMAIN_EXTENSION_MAPPING:'{"dsw.com":["payment-trigger"],"direct.asda.com":["payment-trigger"],"footlocker.co.uk":["payment-trigger"],"cinemark.com":["payment-trigger"],"kidsfootlocker.com":["payment-trigger"],"champssports.com":["payment-trigger"],"famousfootwear.com":["payment-trigger"],"footlocker.com":["payment-trigger"],"cdkeys.com":["payment-trigger"],"newegg.com":["payment-trigger"],"citybeach.com/au":["payment-trigger"],"footlocker.com.au":["payment-trigger"],"generalpants.com":["payment-trigger"],"hoyts.com.au":["payment-trigger"]}',LOCAL_LAUNCHER_DOMAINS:"gumtree.com.au,oldnavy.gap.com,officesupply.com,trueclassictees.com,thelasthunt.com"}}const Ht={NO_OPTIONS:"Please provide an options object",NO_ACCOUNT_ID:"Please provide your account id",SECOND_INSTANCE:"Integration Launcher already created",BROWSER_NOT_SUPPORTED:"Client browser is not supported"},Yt=new class extends ye{constructor(e=-1){super(),this._buffer=[],this._error=null,this._bufferLength=e}subscribe(e,t,n){const r=Re(e,t,n);let o=!0;return this._buffer.filter((e=>(e===this._error&&(o=!1),o))).forEach((e=>r.next(e))),this._error&&r.error(this._error),r.error=e=>{this._error=e,t(e)},super.subscribe(r)}next(e){this._error||this._addToBuffer(e),super.next(e)}error(e){this._error=e,this._addToBuffer(e),super.error(e)}_addToBuffer(e){-1!==this._bufferLength&&this._buffer.length===this._bufferLength?(this._buffer.shift(),this._buffer.push(e)):this._buffer.push(e)}};class Kt{constructor(e){this._reportError=e,this._optedInExtensions=new Set}setExtensionData(e){((e,t="launcher")=>{const n={data:e,source:t,type:"onPartnerDataReceived"};Yt.next(n)})(e),Object.entries(e).forEach((([e])=>{this._optedInExtensions.has(e)||this._reportError(Xt({code:"EXTENSION_NOT_OPTED_IN",severity:jt.WARNING,additionalInformation:{extensionName:e}}))}))}registerExtension(e){this._optedInExtensions.add(e)}}function Zt({integrationUrl:e,clientUrl:t,reportError:n}){const r=function(e){const t={extensions:[]};if(!e||"string"!=typeof e)return t;let n;try{n=new URL(e).searchParams}catch(e){return t}return{extensions:function(){const e=function(e){const t=n.get("extensions");return t?t.trim():null}();if(!e)return[];const t=e.split(",").map((e=>e.trim())).filter((e=>/^[a-zA-Z0-9-]+$/.test(e)));return Array.from(new Set(t))}()}}(function(){const e=L(window.document,"/integrations/launcher.js");return(null==e?void 0:e.src)||""}()).extensions,o=function(e,t,n){if(!n)return[];try{const o=new URL(e),{hostname:i}=o,s=JSON.parse(n);if(!(r=s)||"object"!=typeof r||!Object.entries(r).every((([e,t])=>"string"==typeof e&&Array.isArray(t)&&t.every((e=>"string"==typeof e)))))return t(Xt({code:Vt.DOMAIN_EXTENSION_MAPPING_ERROR,severity:jt.ERROR,additionalInformation:{mappingString:n,clientUrl:e,error:"Invalid domain extension mapping format"}})),[];const a=new Set;for(const[e,t]of Object.entries(s)){const n=i.includes(e),r=`${i}${o.pathname}`.includes(e);(n||r)&&t.forEach((e=>a.add(e)))}return Array.from(a)}catch(r){return t(Xt({code:Vt.DOMAIN_EXTENSION_MAPPING_ERROR,severity:jt.ERROR,additionalInformation:{mappingString:n,clientUrl:e,error:r instanceof Error?r.message:String(r)}})),[]}var r}(t,n,$t().DOMAIN_EXTENSION_MAPPING),i=[...new Set([...r,...o])],s=(e=>new Kt(e))(n);return i.forEach((async t=>{const r=`${e}/wsdk/extensions/${t}/index.mjs`;let o;try{o=await(e=>import(e))(r)}catch(e){const o=Xt({code:Vt.EXTENSION_LOAD_ERROR,severity:jt.ERROR,additionalInformation:{extensionName:t,url:r,error:e instanceof Error?e.message:String(e)}});return void n(o)}try{(0,o.default)({controllerProxy:Ut,reportError:n,extensionSubjects:Yt}),s.registerExtension(t)}catch(e){const r=Xt({code:Vt.EXTENSION_INITIALIZATION_ERROR,severity:jt.ERROR,additionalInformation:{extensionName:t,error:e instanceof Error?e.message:String(e)}});n(r)}})),{extensionAPI:s,setExtensionData:e=>{s.setExtensionData.bind(s)(e),Ut.setExtensionVNextConfig(e)},optedInExtensions:i}}const Qt="__rokt_cl__",zt="__rokt_il__",Jt="__rokt_ac_id__",qt="__rokt_li_guid__",en=f();function tn(e){return new Proxy(e,{get:(e,t)=>"selectPlacements"===t||"captureConversion"===t?(...n)=>{if(n[0]=n[0]||{},n[0].url=window.location.href,"selectPlacements"===t){const e=Date.now();n.push(e)}return e[t](...n)}:"terminate"===t?async()=>{const t=new Promise((e=>setTimeout((()=>{e()}),500))),n=(async()=>{await e.terminate()})();return Promise.race([n,t])}:e[t]})}var nn=n(879);const rn=Date.now(),on=function({window:e,integrationStart:t=Date.now(),reportErrorFrame:n}){var r,o;const i=function(e,t,n){const r=O().ROKT_COM_URL;try{return function(e,t,n,r){var o;const i=`/integrations/${t.toLowerCase()}.js`,s=L(e.document,i);if(!s){const t=e.document.getElementsByTagName("script");return n(w({code:v,severity:h,additionalInformation:{queryUndefined:`${void 0===t}`,noOfScripts:`${t?t.length:0}`}}),r),r}const a=new URL(s.src),c=null===(o=s.dataset)||void 0===o?void 0:o.proxySubPath,l=function(e,t){let n=`${e.protocol}//${e.host}`;const r=e.pathname.toLowerCase();if(r.endsWith(t)){let e=r.slice(0,-t.length);e.endsWith("/wsdk")?e=e.slice(0,-5):e.endsWith("/wsdk2")&&(e=e.slice(0,-6)),n=`${n}${e}`}return n}(a,i);return c&&!l.includes(c)?`${l}${c}`:l}(e,"launcher",n,r)}catch(e){return n(w(e,{code:v,severity:h}),r),r}}(e,0,n),s=e=>n(e,i),a=function(e){const t=Number(e),n=isNaN(t)?100:t;return 100*Math.random()<n}($t().INIT_LOG_SAMPLING_PERCENTAGE),c=(e=>{try{const t=new URL(e);return"chrome-extension:"===t.protocol||"moz-extension:"===t.protocol||"safari-web-extension:"===t.protocol}catch(e){return!1}})(i),l=function(){const t=$t().LOCAL_LAUNCHER_DOMAINS;if(!t)return!1;try{return t.split(",").map((e=>e.trim())).filter(Boolean).some((t=>e.location.href.includes(t)))&&Math.random()<.5}catch(e){const t=Xt(e,{code:Gt.FAILED_TO_DETECT_LOCAL_LAUNCHER,severity:jt.ERROR});return s(t),!1}}(),d=`${l?"ILL":"IL"}-${$t().VERSION}`,u=c?`ILBE-${$t().VERSION}`:d,E=c?"integration-launcher-browser-extension":"integration-launcher";((e,t)=>{Ct||(wt(e,t),At.subscribe((async e=>{try{const t=await bt(e);Tt.next({id:e.id,topic:ht.EventResult,identifier:Ot,result:t,handler:gt.Result})}catch(t){const n={message:null==t?void 0:t.message,stack:null==t?void 0:t.stack,topic:e.topic};Tt.next({id:e.id,handler:gt.Result,topic:ht.EventResult,identifier:Ot,error:n})}})),Rt.subscribe((e=>{if(!Pt)return void Dt.push(e);const t=yt.getValue();t&&t.postMessage(e)})),yt.subscribe((e=>{if(e&&e&&Dt.length){for(;Dt.length;){const t=Dt.shift();e.postMessage(t)}Pt=!0}})),Ct=!0)})(i,(e=>{s(Xt({code:Gt.INVALID_MESSAGE_ORIGIN,severity:jt.WARNING,additionalInformation:{originUrl:e}}))})),Ut.setFrameworkTiming({name:"integrationStart",value:t});const{setExtensionData:g,optedInExtensions:R}=Zt({integrationUrl:i,clientUrl:e.location.href,reportError:s});Promise.race([j(e,en),new Promise((e=>setTimeout((()=>e(!1)),13e3)))]).then((e=>{if(!e){const e=$();s(new Wt({code:Gt.CORE_LAUNCHER_TIMEOUT,additionalInformation:{controllerFrameName:en,VERSION:u,iframeFound:JSON.stringify(e),integration:E},severity:jt.INFO}))}})).catch((e=>{}));const T=Date.now();var A;Ut.setFrameworkTiming({name:"integrationEnd",value:T}),e[qt]&&"string"==typeof e[qt]||(e[qt]=f()),A={launcherInstanceGuid:e[qt],sdkVersion:u,integration:E},kt||(Ut.setConfigurations(A),kt=!0),(()=>{if(Ft)return;let e=location.href;Ut.syncLocation(location.href,Date.now()),new MutationObserver((function(){if(location.href!==e){e=location.href;const t=Date.now();Ut.syncLocation(location.href,t)}})).observe(document,{subtree:!0,childList:!0}),Ft=!0})(),a&&async function({window:e,integrationUrl:t,version:n,launcherInstanceGuid:r,scriptPath:o,integrationStart:i,integrationEnd:s}){var a,c;const l=new URLSearchParams;l.append("version",n),l.append("launcherInstanceGuid",r),l.append("isCached",((e,t)=>{if(""===t)return!1;const n=e.performance.getEntriesByType("resource").find((({name:e})=>e.includes(t)));return!(!n||0!==n.duration)})(e,o).toString()),l.append("integrationStart",Math.round(i).toString()),l.append("integrationEnd",Math.round(s).toString());const d=(e=>{var t,n,r,o;const i=null!==(n=null===(t=null==e?void 0:e.performance)||void 0===t?void 0:t.timeOrigin)&&void 0!==n?n:null===(o=null===(r=null==e?void 0:e.performance)||void 0===r?void 0:r.timing)||void 0===o?void 0:o.navigationStart;return isNaN(i)?void 0:i})(e);d&&l.append("timeOrigin",Math.round(d).toString());const u=null===(c=null===(a=null==e?void 0:e.location)||void 0===a?void 0:a.href)||void 0===c?void 0:c.split("?")[0];if(u&&l.append("pageUrl",u),!(e=>{try{const t=new URL(e);return"chrome-extension:"===t.protocol||"moz-extension:"===t.protocol||"safari-web-extension:"===t.protocol}catch(e){return!1}})(t)){const n=`${t}/v1/wsdk-init/index.html?${l.toString()}`;(e=>t=>{const n=F(e,t),r=new Promise((e=>n.onload=e)),o=e.document.body||e.document.head;o.appendChild(n),r.then((()=>{n.onload=null,o.removeChild(n)}))})(e)(n)}}({window:e,integrationUrl:i,version:u,launcherInstanceGuid:e[qt],scriptPath:$t().SCRIPT_PATH,integrationStart:t,integrationEnd:T});const y={name:(null===(o=null===(r=e.location)||void 0===r?void 0:r.pathname)||void 0===o?void 0:o.includes("preload"))?"":$t().PRELOAD_PLUGIN_NAME,shouldRegister:!1,isCoreLauncherCreated:!1};function S(e,t,n){s({additionalInformation:Object.assign(Object.assign({},e.additionalInformation),{controllerFrameName:en,version:n}),code:e.code||Gt.INITIALIZATION_ERROR,integration:t,message:e.message,name:e.name,reporter:e.reporter||"WSDK",severity:e.severity||jt.ERROR,stack:e.stack,tagId:"",handled:e.handled})}!async function(e,t,n){const r=x(e),o=[p.Widget,p.DCUI].filter((e=>e!==n)).map((e=>N(t,e)));await Promise.all(o.map(r))}(e,i,y.name),Boolean(y.name)&&async function(e,t,n){const r=N(t,n);await((e,t)=>n=>{if(Boolean(e.document.getElementById(t)))return;const r=M(e,n,t,!0);r.id=t;const o=new Promise((e=>r.onload=e)),i=t=>{const s=e.document.body;if(s)s.appendChild(r),o.then((()=>{r.onload=null}));else{if(!(t<3))throw x(e)(n),new Error("Failed to append the preloaded plugin to document.body");{const e=100*Math.pow(2,t);setTimeout((()=>i(t+1)),e)}}};i(0)})(e,n)(r)}(e,i,y.name).then((()=>{y.isCoreLauncherCreated?j(e,en).then((e=>{H(e)})):y.shouldRegister=!0})).catch((e=>{const t=Xt(e,{code:Gt.FAILED_TO_APPEND_PRELOAD_IFRAME_TO_BODY,severity:jt.INFO});s(t)})),async function(e){const t=function(e){var t;const n=(null===(t=null==e?void 0:e.location)||void 0===t?void 0:t.origin)||"";switch(e.btoa(n)){case"aHR0cHM6Ly93d3cudmljdG9yaWFzc2VjcmV0LmNvbQ==":return[atob("dGFncy50aXFjZG4uY29tL3V0YWcvdmljdG9yaWFzc2VjcmV0L3ZzLXVzL3Byb2QvdXRhZy5qcw=="),atob("aHR0cHM6Ly9jZG4ucXVhbnR1bW1ldHJpYy5jb20vcXNjcmlwdHMvcXVhbnR1bS12aWN0b3JpYXNzZWNyZXQuanM=")];case"aHR0cHM6Ly93d3cuYW1jdGhlYXRyZXMuY29t":return["W22RR8X5","800592284"];case"aHR0cHM6Ly90aWNrZXRzLmZhbmRhbmdvLmNvbQ==":return["EN09fe9a58a5254b48b215a460de4cd41b","RCba067765c51b48cc967291a4be882bda"];default:return[]}}(e);if(t.length)try{const n=await async function(e,t,n=5e3){for(const r of t)if(!await G(e,r,n))return!1;return!0}(e,t);await Ut.sendLoadStatus(n)}catch(e){return}}(e);const b=n=>{var r;Ut.setFrameworkTiming({name:It,value:Date.now()}),Ut.sendTimingEvent({name:"localLauncherUsed",value:Date.now()});const o=n,c=null!==(r=null==o?void 0:o.integrationName)&&void 0!==r?r:E;C(c),P(o,c),U(e,n.accountId,i),e[Jt]=o.accountId;const l=o.pageInitTimestamp,u=o.integrationVersion||d;try{l&&l.getTime&&Ut.setFrameworkTiming({name:ft,value:l.getTime()});const n=k(e,t,l);n||s(new Wt({code:Gt.PAGE_START_NOT_FOUND,severity:jt.WARNING,additionalInformation:{pageInitTimestamp:JSON.stringify(l),integrationStart:JSON.stringify(t),timeOrigin:JSON.stringify(e.performance.timeOrigin)},integration:c})),!0===o.sandbox&&e.console.warn("ROKT: 'sandbox' mode enabled. ROKT Placements shown will not generate revenue. If this is not intended then please omit the 'sandbox' flag when initializing ROKT's SDK.");const r={pageStart:n,integrationStart:t,integrationEnd:T,version:u,integration:c,launcherInstanceGuid:e[qt],accountId:o.accountId,noDeviceId:o.noDeviceId,noFunctional:o.noFunctional,noTargeting:o.noTargeting,doNotShareOrSell:o.doNotShareOrSell,sandbox:o.sandbox,sessionId:o.sessionId,customHeaders:o.customHeaders,roktCookies:W(s),roktLocalStorage:V(s),proxySubPath:o.proxySubPath,overrideLinkNavigation:o.overrideLinkNavigation,deepLinkingPattern:o.deepLinkingPattern,optedInExtensions:o.optedInExtensions,integrationUrl:i,initLoggingEnabled:a},d=j(e,en);d.then((async e=>{await X(e,u,en,c)})).catch((e=>{S(e,c,u)}));const E=B(r,d);return Ut.setFrameworkTiming({name:pt,value:Date.now()}),Ut.setFrameworkTiming({name:Nt,value:Date.now()}),E}catch(t){throw e[Qt]=void 0,e[zt]=void 0,S(t,c,u),t}};return{createLauncher:async function(n){var r;if(l)return b(n);Ut.setFrameworkTiming({name:It,value:Date.now()});const o=n,c=null!==(r=null==o?void 0:o.integrationName)&&void 0!==r?r:E;C(c),P(o,c),U(e,n.accountId,i),e[Jt]=o.accountId;const d=o.integrationVersion||u;try{const r=await async function(e,n,r,o,a,c=!0,l){var d,u,E,m;if(e[zt]&&(null===(u=null===(d=e[zt])||void 0===d?void 0:d.isFulfilled)||void 0===u?void 0:u.call(d)))return e[zt].promise;(null===(m=null===(E=e[zt])||void 0===E?void 0:E.isPending)||void 0===m?void 0:m.call(E))||(e[zt]=new _),l&&l.getTime&&Ut.setFrameworkTiming({name:ft,value:l.getTime()});const f=k(e,t,l);f||s(new Wt({code:Gt.PAGE_START_NOT_FOUND,severity:jt.WARNING,additionalInformation:{pageInitTimestamp:JSON.stringify(l),integrationStart:JSON.stringify(t),timeOrigin:JSON.stringify(e.performance.timeOrigin)},integration:o}));const I=await j(e,n);await X(I,r,n,o);const p=I.getLauncherExtension({pageStart:f,integrationStart:t,integrationEnd:T,version:r,integration:o,launcherInstanceGuid:e[qt],accountId:a.accountId,noDeviceId:a.noDeviceId,noFunctional:a.noFunctional,noTargeting:a.noTargeting,doNotShareOrSell:a.doNotShareOrSell,sandbox:a.sandbox,sessionId:a.sessionId,customHeaders:a.customHeaders,roktCookies:W(s),roktLocalStorage:V(s),proxySubPath:a.proxySubPath,overrideLinkNavigation:a.overrideLinkNavigation,deepLinkingPattern:a.deepLinkingPattern,optedInExtensions:a.optedInExtensions,integrationUrl:i,initLoggingEnabled:c}).then((e=>e.public)).then((e=>(Ut.setFrameworkTiming({name:pt,value:Date.now()}),Ut.sendTimingEvent({name:pt,value:Date.now()}),tn(e))));return e[zt].resolve(p),p}(e,en,d,c,Object.assign(Object.assign({},o),{optedInExtensions:R}),a,n.pageInitTimestamp);return Ut.setFrameworkTiming({name:Nt,value:Date.now()}),r}catch(t){throw e[Qt]=void 0,e[zt]=void 0,s({additionalInformation:Object.assign(Object.assign({},t.additionalInformation),{controllerFrameName:en,version:d}),code:t.code||Gt.INITIALIZATION_ERROR,integration:c,message:t.message,name:t.name,reporter:t.reporter||"WSDK",severity:t.severity||jt.ERROR,stack:t.stack,tagId:"",handled:t.handled}),t}},__getActiveLauncher:function(){var t,n;return null!==(n=null===(t=e[zt])||void 0===t?void 0:t.promise)&&void 0!==n?n:Promise.resolve(void 0)},setExtensionData:g,createLocalLauncher:b};function C(t){var n,r;const o=m();(function(e,t){switch(null==t?void 0:t.name){case"chrome":return parseFloat(null==t?void 0:t.version)>=52;case"safari":case"ios":return parseFloat(null==t?void 0:t.version)>=13;case"ios-webview":return parseFloat(null==t?void 0:t.version)>=604;case"edge-chromium":return parseFloat(null==t?void 0:t.version)>=90}return!e.navigator.userAgent.includes("Waterfox")})(e,o)||D(Gt.BROWSER_NOT_SUPPORTED,jt.WARNING,t,{browserName:null!==(n=null==o?void 0:o.name)&&void 0!==n?n:"",browserVersion:null!==(r=null==o?void 0:o.version)&&void 0!==r?r:""})}function P(t,n){t||D(Gt.NO_OPTIONS,jt.WARNING),t.accountId||D(Gt.NO_ACCOUNT_ID,jt.WARNING,n),e[Jt]&&t.accountId!==e[Jt]&&D(Gt.SECOND_INSTANCE,jt.WARNING,n,{accountId:t.accountId})}function D(e,t,n,r){const o=Xt({code:Gt[e],severity:t,message:Ht[e],integration:n,additionalInformation:r});throw s(o),o}function j(e,t){if(e[Qt])return e[Qt];const n=async function(e,t,n,r){return _t({integrationUrl:n+"/wsdk",windowRef:e,controllerFrameName:t,reportError:r,deploymentVersion:{version:$t().VERSION,isCanary:"true"===$t().CANARY}})}(e,t,i,(e=>((e,t)=>{t(Xt({code:Gt.INVALID_RPC_MESSAGE_ORIGIN,severity:jt.WARNING,additionalInformation:{originUrl:e}}))})(e,s)));return n.then((t=>{t&&(t.onTerminate().then((()=>{e[zt]=void 0,e[Qt]=void 0,e[Jt]=void 0})),y.shouldRegister&&H(t),y.isCoreLauncherCreated=!0)})).catch((e=>{s(new Wt({code:Gt.CORE_LAUNCHER_INITIALIZATION,additionalInformation:{controllerFrameName:t,VERSION:u},message:e.message}))})),e[Qt]=n,n}async function X(e,t,n,r){if(await Promise.race([e.connection.onReady().then((()=>!0)),I(13e3).then((()=>!1))]))return;const o=$(),i=new Wt({code:Gt.CONTROLLER_INITIALIZATION,additionalInformation:{status:JSON.stringify(e.connection.status),controllerFrameName:n,version:t,iframeFound:JSON.stringify(o)},integration:r});throw e.connection.onReady().then((()=>{const o=$();s({additionalInformation:{status:JSON.stringify(e.connection.status),controllerFrameName:n,iframeFound:JSON.stringify(o),version:t},code:Gt.LATE_CONTROLLER_INITIALIZATION,integration:r,message:Gt.LATE_CONTROLLER_INITIALIZATION,name:Gt.LATE_CONTROLLER_INITIALIZATION,reporter:"WSDK",severity:jt.INFO,tagId:""})})),i}function $(){let t=!1;try{t=!!e.document.querySelector('[data-core-type="controller"]')}catch(e){}return t}function H(e){e.registerPreloadedPluginIframe(y.name),y.shouldRegister=!1}}({window,integrationStart:rn,reportErrorFrame:nn.reportError})})(),window.Rokt=r.default})();
//# sourceMappingURL=https://sourcemaps-wsdk.roktinternal.com/integrations/launcher.2.6685.0.js.map